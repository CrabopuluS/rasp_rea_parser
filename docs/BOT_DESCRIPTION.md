# –û–ø–∏—Å–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –†–≠–£

–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–æ—Ç–∞ (—Ñ–∞–π–ª `bot.py`), –µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–∞—Ä—Å–µ—Ä–æ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (`schedule_parser.py`), —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é –∏ —Ç–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ Telegram.
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ `.ics` —Ñ–∞–π–ª–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π –∏ Google Calendar.
- –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–º —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–∏–ø–∞ –∑–∞–Ω—è—Ç–∏—è, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏.
- –ü–ª–∞–Ω–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–∞–∫ –≤ –ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö, —Ç–∞–∫ –∏ –≤ –≥—Ä—É–ø–ø–∞—Ö (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏–ª–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏—é –±–æ—Ç–∞).

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`SCHEDULE_URL`, `SCHEDULE_GROUP`).
2. –ó–∞–ø—Ä–æ—Å HTML —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –¥–µ—Ç–∞–ª–µ–π –∑–∞–Ω—è—Ç–∏–π —á–µ—Ä–µ–∑ `schedule_parser.fetch_events`, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ `asyncio.to_thread`, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ Telegram.
3. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏ (`format_weekly_schedule`) –∏–ª–∏ –≤ –¥–≤–∞ `.ics` —Ñ–∞–π–ª–∞ (`build_ics`), –æ—Ç–ª–∏—á–∞—é—â–∏—Ö—Å—è —Ç–∞–π–º–∑–æ–Ω–æ–π/—Ü–≤–µ—Ç–∞–º–∏/–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏.
4. –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: —Ç–µ–∫—Å—Ç, –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–ª–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `JobQueue` –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `python-telegram-bot`.

## –ö–æ–º–∞–Ω–¥—ã –∏ –∫–Ω–æ–ø–∫–∏
- `/start` (`/help`) ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –∏ —Ç–µ–∫—É—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é; –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Ç—Ä–µ–º—è –∫–Ω–æ–ø–∫–∞–º–∏.
- `/week [url] [group]` ‚Äî —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ–¥–µ–ª–∏; –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.
- `/ics [url] [group]` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–≤—É—Ö `.ics` —Ñ–∞–π–ª–æ–≤ (–º–æ–±–∏–ª—å–Ω—ã–π –∏ Google) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Telegram.
- `/plan <YYYY-MM-DD> <HH:MM> [url] [group]` ‚Äî –ø–ª–∞–Ω–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è (–ú–°–ö).
- –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é: ¬´üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ–¥–µ–ª–∏¬ª, ¬´üìÇ –ü–æ–ª—É—á–∏—Ç—å .ics¬ª, ¬´‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É¬ª –≤—ã–∑—ã–≤–∞—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã.
- –í –ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö —Ç–µ–∫—Å—Ç –±–µ–∑ –∫–æ–º–∞–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ; –Ω–∞–ª–∏—á–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ `ics` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–∞–π–ª–æ–≤.
- –í –≥—Ä—É–ø–ø–∞—Ö –±–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (¬´—Ä–∞—Å–ø–∏—Å¬ª) –∏–ª–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ `@username`; –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Privacy Mode –≤ BotFather.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤ —Å—Ç—Ä–æ–≥–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ: `/week` –∏ `/ics` ‚Äî –Ω–µ –±–æ–ª–µ–µ –¥–≤—É—Ö, `/plan` ‚Äî –º–∏–Ω–∏–º—É–º –¥–≤–∞ (–¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è), –º–∞–∫—Å–∏–º—É–º —á–µ—Ç—ã—Ä–µ.
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–∞—Ä—Å—è—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `parse_schedule_datetime`, –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD` –∏ `HH:MM` (24 —á–∞—Å–∞). –í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±—É–¥—É—â–∏–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `Europe/Moscow`.
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã `DEFAULT_URL`/`DEFAULT_GROUP` –≤ `schedule_parser.py`.
- –î–ª—è –ø–ª–∞–Ω–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è URL, –∫–æ–¥ –≥—Ä—É–ø–ø—ã –∏ –¥–∞—Ç–∞ –æ–ø–æ—Ä–Ω–æ–π –Ω–µ–¥–µ–ª–∏ –≤ `job.data` `JobQueue`.

## –§–∞–π–ª—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- `build_ics` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π:
  - *mobile*: –ª–æ–∫–∞–ª—å–Ω–∞—è —Ç–∞–π–º–∑–æ–Ω–∞ `Europe/Moscow`, —Ü–≤–µ—Ç–∞ —Å–æ–±—ã—Ç–∏–π, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (-70 –∏ -10 –º–∏–Ω—É—Ç –ª–∏–±–æ -10 –¥–ª—è –ø–∞—Ä 2/3).
  - *google*: –≤—Ä–µ–º—è –≤ UTC, –±–µ–∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ–ª–µ–π —Ü–≤–µ—Ç–∞/–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.
- –ù–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å—Ç—Ä–æ—è—Ç—Å—è –ø–æ `slugify_group_name`, –∫–æ—Ç–æ—Ä–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –≥—Ä—É–ø–ø—ã –∏ –æ—á–∏—â–∞–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã.
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `TemporaryDirectory`; —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∏—Ç–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –ª–æ–≥–∏–∫—É –≤ `try/except` —Å –∑–∞–ø–∏—Å—å—é –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥ —É—Ä–æ–≤–Ω—è `ERROR` –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
- –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `rasp.rea.ru` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `requests.Session` —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `RequestException`/`Timeout`.
- –ü—É—Å—Ç—ã–µ –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ HTML/–æ—Ç–≤–µ—Ç—ã API –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏, —á—Ç–æ–±—ã –±–æ—Ç –Ω–µ –ø–∞–¥–∞–ª –æ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Python 3.12+, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt` (`requests`, `beautifulsoup4`, `python-telegram-bot`, `tzdata` –¥–ª—è Windows).
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `TELEGRAM_BOT_TOKEN` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ), `SCHEDULE_URL`, `SCHEDULE_GROUP` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ `.env`, –µ—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ ‚Äî `Europe/Moscow`; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–∞–∑—ã IANA –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `UTC+3` —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º.

## –ó–∞–ø—É—Å–∫ –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`.
2. –°–æ–∑–¥–∞—Ç—å `.env` —Å —Ç–æ–∫–µ–Ω–æ–º –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: `python bot.py`. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã –º–µ–Ω—é.
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É. –î–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –æ—Ç–∫–ª—é—á–∏—Ç—å Privacy Mode.
5. –¢–µ—Å—Ç—ã: `pytest` (–±–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –°–∞–π—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å HTML/API, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø—É—Å—Ç—ã–º –æ—Ç–≤–µ—Ç–∞–º; –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--verbose` –≤ CLI –∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å `INFO` –≤ –±–æ—Ç–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
- –ü—Ä–∏ —Å–ª–∞–±–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –≤–æ–∑–º–æ–∂–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã; –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã.
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL –∏ –≥—Ä—É–ø–ø—ã –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å–∞–π—Ç–∞; –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `/Schedule/SearchBarSuggestions`.

